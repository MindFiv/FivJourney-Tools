# API æ¥å£æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† FIVC Journey æ—…æ¸¸å…¨ç¨‹è¿½è¸ªç³»ç»Ÿçš„æ‰€æœ‰APIæ¥å£ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

**Charlie ZHANG**  
ğŸ“§ Email: sunnypig2002@gmail.com

## ğŸŒ åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:8000`
- **API ç‰ˆæœ¬**: `v1`
- **API å‰ç¼€**: `/api/v1`
- **è®¤è¯æ–¹å¼**: JWT Bearer Token
- **æ•°æ®æ ¼å¼**: JSON

## ğŸ“– åœ¨çº¿æ–‡æ¡£

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

> ğŸ’¡ **æç¤º**: æ¨èä½¿ç”¨åœ¨çº¿æ–‡æ¡£è¿›è¡ŒAPIæµ‹è¯•ï¼Œæœ¬æ–‡æ¡£ä¸»è¦ç”¨äºå‚è€ƒã€‚

## ğŸ” è®¤è¯æµç¨‹

### è·å–è®¿é—®ä»¤ç‰Œ

å¤§å¤šæ•°APIç«¯ç‚¹éœ€è¦è®¤è¯ã€‚é¦–å…ˆéœ€è¦æ³¨å†Œç”¨æˆ·å¹¶è·å–è®¿é—®ä»¤ç‰Œï¼š

1. **æ³¨å†Œç”¨æˆ·**: `POST /api/v1/auth/register`
2. **ç”¨æˆ·ç™»å½•**: `POST /api/v1/auth/login`
3. **ä½¿ç”¨ä»¤ç‰Œ**: åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  `Authorization: Bearer <token>`

## ğŸ“‹ API ç«¯ç‚¹æ€»è§ˆ

### ğŸ” è®¤è¯ç›¸å…³ (`/api/v1/auth`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/register` | ç”¨æˆ·æ³¨å†Œ | âŒ |
| POST | `/login` | ç”¨æˆ·ç™»å½• | âŒ |

### ğŸ‘¤ ç”¨æˆ·ç®¡ç† (`/api/v1/users`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| GET | `/me` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ… |
| PUT | `/me` | æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ… |
| GET | `/{user_id}` | è·å–ç”¨æˆ·ä¿¡æ¯ | âœ… |

### ğŸ—ºï¸ æ—…è¡Œè®¡åˆ’ (`/api/v1/travel-plans`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/` | åˆ›å»ºæ—…è¡Œè®¡åˆ’ | âœ… |
| GET | `/` | è·å–æ—…è¡Œè®¡åˆ’åˆ—è¡¨ | âœ… |
| GET | `/{plan_id}` | è·å–æ—…è¡Œè®¡åˆ’è¯¦æƒ… | âœ… |
| PUT | `/{plan_id}` | æ›´æ–°æ—…è¡Œè®¡åˆ’ | âœ… |
| DELETE | `/{plan_id}` | åˆ é™¤æ—…è¡Œè®¡åˆ’ | âœ… |

### ğŸ“… è¡Œç¨‹å®‰æ’ (`/api/v1/itineraries`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/` | åˆ›å»ºè¡Œç¨‹å®‰æ’ | âœ… |
| GET | `/travel-plan/{plan_id}` | è·å–æ—…è¡Œè®¡åˆ’çš„è¡Œç¨‹åˆ—è¡¨ | âœ… |
| GET | `/{itinerary_id}` | è·å–è¡Œç¨‹è¯¦æƒ… | âœ… |
| PUT | `/{itinerary_id}` | æ›´æ–°è¡Œç¨‹å®‰æ’ | âœ… |
| DELETE | `/{itinerary_id}` | åˆ é™¤è¡Œç¨‹å®‰æ’ | âœ… |

### ğŸ’° è´¹ç”¨è®°å½• (`/api/v1/expenses`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/` | åˆ›å»ºè´¹ç”¨è®°å½• | âœ… |
| GET | `/` | è·å–è´¹ç”¨è®°å½•åˆ—è¡¨ | âœ… |
| GET | `/statistics` | è·å–è´¹ç”¨ç»Ÿè®¡ | âœ… |
| GET | `/{expense_id}` | è·å–è´¹ç”¨è®°å½•è¯¦æƒ… | âœ… |
| PUT | `/{expense_id}` | æ›´æ–°è´¹ç”¨è®°å½• | âœ… |
| DELETE | `/{expense_id}` | åˆ é™¤è´¹ç”¨è®°å½• | âœ… |

### ğŸ“ æ—…è¡Œæ—¥å¿— (`/api/v1/travel-logs`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/` | åˆ›å»ºæ—…è¡Œæ—¥å¿— | âœ… |
| GET | `/` | è·å–æ—…è¡Œæ—¥å¿—åˆ—è¡¨ | âœ… |
| GET | `/my` | è·å–æˆ‘çš„æ—…è¡Œæ—¥å¿— | âœ… |
| GET | `/public/latest` | è·å–æœ€æ–°å…¬å¼€æ—¥å¿— | âŒ |
| GET | `/{log_id}` | è·å–æ—…è¡Œæ—¥å¿—è¯¦æƒ… | âœ… |
| PUT | `/{log_id}` | æ›´æ–°æ—…è¡Œæ—¥å¿— | âœ… |
| DELETE | `/{log_id}` | åˆ é™¤æ—…è¡Œæ—¥å¿— | âœ… |

## ğŸ” è¯¦ç»†APIè¯´æ˜

### è®¤è¯ç›¸å…³

#### ç”¨æˆ·æ³¨å†Œ

```http
POST /api/v1/auth/register
Content-Type: application/json

{
  "username": "john_doe",
  "email": "john@example.com", 
  "password": "securepassword123",
  "full_name": "John Doe",
  "phone": "+1234567890"
}
```

#### ç”¨æˆ·ç™»å½•

```http
POST /api/v1/auth/login
Content-Type: application/x-www-form-urlencoded

username=john_doe&password=securepassword123
```

### æ—…è¡Œè®¡åˆ’

#### åˆ›å»ºæ—…è¡Œè®¡åˆ’

```http
POST /api/v1/travel-plans/
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "Tokyo Adventure",
  "description": "Amazing trip to Tokyo",
  "destination": "Tokyo, Japan",
  "start_date": "2024-06-01",
  "end_date": "2024-06-07",
  "budget": 2000.00,
  "currency": "USD",
  "tags": ["adventure", "culture", "food"]
}
```

## ğŸ“Š å“åº”æ ¼å¼

### æˆåŠŸå“åº”

```json
{
  "data": {...},
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### é”™è¯¯å“åº”

```json
{
  "detail": "é”™è¯¯æè¿°",
  "error_code": "ERROR_CODE",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

## ğŸ”§ çŠ¶æ€ç 

| çŠ¶æ€ç  | æè¿° |
|-------|------|
| 200 | æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ |
| 400 | è¯·æ±‚é”™è¯¯ |
| 401 | æœªè®¤è¯ |
| 403 | æƒé™ä¸è¶³ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 422 | æ•°æ®éªŒè¯é”™è¯¯ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

## ğŸ”— ç›¸å…³é“¾æ¥

- [åœ¨çº¿APIæ–‡æ¡£ (Swagger)](http://localhost:8000/docs)
- [æ•°æ®æ¨¡å‹æ–‡æ¡£](./models.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./quick-start.md) 